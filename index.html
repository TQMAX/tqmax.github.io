<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>神棍MAX的iOS杂货铺</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="My goal is not write code.if we could ship products and make all this money without writing any code,we could.Your job is ship products EXACTLY on time.It doesn’t matter whether you are a developer,te">
<meta property="og:type" content="website">
<meta property="og:title" content="神棍MAX的iOS杂货铺">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="神棍MAX的iOS杂货铺">
<meta property="og:description" content="My goal is not write code.if we could ship products and make all this money without writing any code,we could.Your job is ship products EXACTLY on time.It doesn’t matter whether you are a developer,te">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="神棍MAX的iOS杂货铺">
<meta name="twitter:description" content="My goal is not write code.if we could ship products and make all this money without writing any code,we could.Your job is ship products EXACTLY on time.It doesn’t matter whether you are a developer,te">
  
    <link rel="alternate" href="/atom.xml" title="神棍MAX的iOS杂货铺" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">神棍MAX的iOS杂货铺</a>
      </h1>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-常见购物车的简单实现方式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/01/27/常见购物车的简单实现方式/" class="article-date">
  <time datetime="2018-01-27T05:37:13.881Z" itemprop="datePublished">2018-01-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/27/常见购物车的简单实现方式/">常见购物车的简单实现方式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p><img src="https://github.com/TQMAX/Markdown-Res/blob/master/Res/ShopCar-1.png?raw=true" alt=""></p>
<h2 id="开局一张图，内容全靠编"><a href="#开局一张图，内容全靠编" class="headerlink" title="开局一张图，内容全靠编!"></a>开局一张图，内容全靠编!</h2><p><br><br></p>
<h3 id="一、界面构建"><a href="#一、界面构建" class="headerlink" title="一、界面构建"></a>一、界面构建</h3><h4 id="1、显而易见，内容用一个tablecView实现即可。首先，我们来分析一下结构。"><a href="#1、显而易见，内容用一个tablecView实现即可。首先，我们来分析一下结构。" class="headerlink" title="1、显而易见，内容用一个tablecView实现即可。首先，我们来分析一下结构。"></a>1、显而易见，内容用一个tablecView实现即可。首先，我们来分析一下结构。</h4><p>下面是结构图：</p>
<p><img src="https://github.com/TQMAX/Markdown-Res/blob/master/Res/ShopCar-4.png?raw=true" alt=""></p>
<p>内容分为店铺大类、商品小类，所以可以用店铺做section，商品做row。<br><br></p>
<p>接着是数据结构体（跟后台协商好，说我们需要这样的数据结构就好了）：</p>
<p><img src="https://github.com/TQMAX/Markdown-Res/blob/master/Res/ShopCar-5.png?raw=true" alt=""></p>
<h4 id="2、界面的实现"><a href="#2、界面的实现" class="headerlink" title="2、界面的实现"></a>2、界面的实现</h4><p>先定义好一个ShopModel类和一个GoodsModel类，然后在主类中引用并定义用于储存这两类数据的可变数组</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>)<span class="built_in">NSMutableArray</span> *ShopsArray;</div></pre></td></tr></table></figure>
<p>把数据从数据体中转换成我们需要的形式</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">self</span>.ShopsArray = [shopModel mj_objectArrayWithKeyValuesArray:[responseObject valueForKey:<span class="string">@"data"</span>]];</div></pre></td></tr></table></figure>
<p>控制section的数量</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">NSInteger</span>)numberOfSectionsInTableView:(<span class="built_in">UITableView</span> *)tableView&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>.ShopsArray.count;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>控制各个section中row的数量</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">NSInteger</span>)tableView:(<span class="built_in">UITableView</span> *)tableView numberOfRowsInSection:(<span class="built_in">NSInteger</span>)section&#123;</div><div class="line">    ShopModel *model = <span class="keyword">self</span>.ShopsArray[section];</div><div class="line">    <span class="built_in">NSMutableArray</span> *goodsArray = [GoodsModel mj_objectArrayWithKeyValuesArray:model.goodsList];</div><div class="line">    <span class="keyword">return</span> goodsArray.count;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>接着是控制row的具体高度，这里麻烦的是赠品高度的处理，由于商城中赠品往往也是一个单独的商品，所以完全可以用GoodsModel类去获取我们需要的属性</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView heightForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath&#123;</div><div class="line"></div><div class="line">   shopModel *model = <span class="keyword">self</span>.ShopsArray[indexPath.section];</div><div class="line">   <span class="built_in">NSMutableArray</span> *goodsArray = [GoodsModel mj_objectArrayWithKeyValuesArray:model.goodsList];</div><div class="line">   GoodsModel *goodsModel = goodsArray[indexPath.row];</div><div class="line">   <span class="built_in">NSMutableArray</span> *giftsArray = [GoodsModel mj_objectArrayWithKeyValuesArray:model.giftsList];</div><div class="line"></div><div class="line">   <span class="keyword">return</span> <span class="number">120</span> + gitsArray.count * <span class="number">20</span>; <span class="comment">//初始高度120，每个赠品高度20</span></div><div class="line">   </div><div class="line">   */</div><div class="line">   当然，我们也可以直接让后台帮我们在Goods添加一个属性字段：goods_giftNum，然后直接读取该字段即可</div><div class="line">   <span class="comment">/*</span></div><div class="line"><span class="comment">&#125;</span></div></pre></td></tr></table></figure>
<p>至此，剩下的cell、sectionHeadView、sectionFooterView自定义即可，整个购物车的界面就完成了<br><br><br><br><br><br></p>
<h3 id="二、业务逻辑的实现"><a href="#二、业务逻辑的实现" class="headerlink" title="二、业务逻辑的实现"></a>二、业务逻辑的实现</h3><h4 id="1、row与section的点选问题"><a href="#1、row与section的点选问题" class="headerlink" title="1、row与section的点选问题"></a>1、row与section的点选问题</h4><p><img src="https://github.com/TQMAX/Markdown-Res/blob/master/Res/ShopCar-2.png?raw=true" alt=""></p>
<p>我们先简单分析一下，可以看到这里的逻辑需要实现3点</p>
<p>1）点击row前面的小红圈，实现该小红圈的勾选与否</p>
<p>2）点击section前面的小红圈，实现该section以及其下面的row的全部小红圈的勾选与否</p>
<p>3）某个section下面的row的全部小红圈的勾选与否关联该section的小红圈勾选与否</p>
<p>要实现这几个点，也许大家会有各种不同的思路与想法，也欢迎大家能与我讨论，这里我先展示我自己的实现方法。我会在ShopModel和GoodsModel里面都填加一个selected属性，添加后也为后面的价格计算业务逻辑提供了很大的便利</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//row小红圈点击方法</span></div><div class="line">- (<span class="keyword">void</span>)rowSelect:(<span class="built_in">UIButton</span> *)button&#123;</div><div class="line">	button.selected = !button.selected; <span class="comment">//先实现自身的点选与否</span></div><div class="line">	</div><div class="line">	<span class="comment">//改变本row的GoodsModel的selected属性</span></div><div class="line">    shopingCellTableViewCell *cell = (shopingCellTableViewCell *)button.superview.superview;</div><div class="line">    <span class="built_in">NSIndexPath</span> *indexPath = [<span class="keyword">self</span>.tableview indexPathForCell:cell];</div><div class="line">    ShopModel *model_shop = <span class="keyword">self</span>.ShopsArray[indexPath.section];</div><div class="line">    <span class="built_in">NSMutableArray</span> *goodsArray = [GoodsModel mj_objectArrayWithKeyValuesArray:model_shop.goodsList]; </div><div class="line">    GoodsModel *model_goods = goodsArray[indexPath.row];</div><div class="line">    model_goods.selected = button.selected;<span class="comment">//自身model的selected勾选与否</span></div><div class="line">    </div><div class="line">    <span class="comment">//计算已点选的row小红圈个数</span></div><div class="line">    <span class="built_in">NSInteger</span> numbers_row = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (GoodsModel *model <span class="keyword">in</span> goodsArray) &#123;</div><div class="line">        <span class="keyword">if</span> (model.selected) &#123;</div><div class="line">            numbers_row ++;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">   <span class="keyword">if</span> (numbers_row == goodsArray.count)&#123;</div><div class="line">       model_shop.selected = <span class="literal">YES</span>;</div><div class="line">   &#125;<span class="keyword">else</span>&#123;</div><div class="line">       model_shop.selected = <span class="literal">NO</span>;</div><div class="line">   &#125;</div><div class="line">   </div><div class="line">	<span class="comment">//计算已点选的section小红圈个数</span></div><div class="line">    <span class="built_in">NSInteger</span> numbers_section = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (ShopModel *model <span class="keyword">in</span> <span class="keyword">self</span>.ShopsArray) &#123;</div><div class="line">        <span class="keyword">if</span> (model.selected) &#123;</div><div class="line">            numbers_section ++;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//改变全选按钮的状态</span></div><div class="line">   <span class="keyword">if</span> (numbers_section == <span class="keyword">self</span>.ShopsArray.count)&#123;</div><div class="line">       allSelectBtn.selected = <span class="literal">YES</span>;</div><div class="line">   &#125;<span class="keyword">else</span>&#123;</div><div class="line">       allSelectBtn.selected = <span class="literal">NO</span>;</div><div class="line">   &#125;</div><div class="line">   </div><div class="line">   [<span class="keyword">self</span> totalMoney];<span class="comment">//计算总价</span></div><div class="line">   [<span class="keyword">self</span>.tableview reloadData];/cellForRowAtIndexPath中根据GoodsModel和viewForHeaderInSection根据ShopModel中的selected字段来显示小红圈勾选状态</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//section小红圈点击方法</span></div><div class="line">- (<span class="keyword">void</span>)sectionSelect:(<span class="built_in">UIButton</span> *)button&#123;</div><div class="line">	button.selected = !button.selected; <span class="comment">//先实现自身的点选与否</span></div><div class="line">	</div><div class="line">	<span class="comment">//改变本row的GoodsModel的selected属性</span></div><div class="line">    shopingHeadView *view = (shopingHeadView *)button.superview.superview;</div><div class="line">    <span class="built_in">NSIndexPath</span> *indexPath = [<span class="keyword">self</span>.tableview indexPathForCell:cell];</div><div class="line">    ShopModel *model_shop = <span class="keyword">self</span>.ShopsArray[indexPath.section];</div><div class="line">    model_shop.selected = button.selected;<span class="comment">//自身model的selected勾选与否</span></div><div class="line">    <span class="built_in">NSMutableArray</span> *goodsArray = [GoodsModel mj_objectArrayWithKeyValuesArray:model_shop.goodsList]; </div><div class="line">    <span class="keyword">for</span> (GoodsModel *model <span class="keyword">in</span> goodsArray) &#123;</div><div class="line">         model.selected = button.selected;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">//计算已点选的section小红圈个数</span></div><div class="line">    <span class="built_in">NSInteger</span> numbers_section = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (ShopModel *model <span class="keyword">in</span> <span class="keyword">self</span>.ShopsArray) &#123;</div><div class="line">        <span class="keyword">if</span> (model.selected) &#123;</div><div class="line">            numbers_section ++;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//改变全选按钮的状态</span></div><div class="line">   <span class="keyword">if</span> (numbers_section == <span class="keyword">self</span>.ShopsArray.count)&#123;</div><div class="line">       allSelectBtn.selected = <span class="literal">YES</span>;</div><div class="line">   &#125;<span class="keyword">else</span>&#123;</div><div class="line">       allSelectBtn.selected = <span class="literal">NO</span>;</div><div class="line">   &#125;</div><div class="line">   </div><div class="line">   [<span class="keyword">self</span> totalMoney];<span class="comment">//计算总价</span></div><div class="line">   [<span class="keyword">self</span>.tableview reloadData];<span class="comment">//cellForRowAtIndexPath中根据GoodsModel和viewForHeaderInSection根据ShopModel中的selected字段来显示小红圈勾选状态</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><br></p>
<h4 id="2、全选的业务逻辑"><a href="#2、全选的业务逻辑" class="headerlink" title="2、全选的业务逻辑"></a>2、全选的业务逻辑</h4><p><img src="https://github.com/TQMAX/Markdown-Res/blob/master/Res/ShopCar-3.png?raw=true" alt=""></p>
<p>有了上一步的铺垫，这一步也可以轻松实现</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//全选小红圈点击方法</span></div><div class="line">- (<span class="keyword">void</span>)allSelect:(<span class="built_in">UIButton</span> *)button&#123;</div><div class="line">	button.selected = !button.selected; <span class="comment">//先实现自身的点选与否</span></div><div class="line">	<span class="keyword">for</span> (ShopModel *model_shop <span class="keyword">in</span> <span class="keyword">self</span>.ShopsArray) &#123;</div><div class="line">		model_shop.selected = button.selected;<span class="comment">//section的model的selected勾选与否</span></div><div class="line">		<span class="built_in">NSMutableArray</span> *goodsArray = [GoodsModel mj_objectArrayWithKeyValuesArray:model_shop.goodsList]; </div><div class="line">        <span class="keyword">for</span> (GoodsModel *model_goods <span class="keyword">in</span> goodsArray) &#123;</div><div class="line">         	model_goods.selected = button.selected; <span class="comment">//row的model的selected勾选与否</span></div><div class="line">    	&#125;</div><div class="line">    &#125;</div><div class="line">       </div><div class="line">   [<span class="keyword">self</span> totalMoney];<span class="comment">//计算总价</span></div><div class="line">   [<span class="keyword">self</span>.tableview reloadData];<span class="comment">//cellForRowAtIndexPath中根据GoodsModel和viewForHeaderInSection根据ShopModel中的selected字段来显示小红圈勾选状态</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="3、合计的业务逻辑"><a href="#3、合计的业务逻辑" class="headerlink" title="3、合计的业务逻辑"></a>3、合计的业务逻辑</h4><p>终于到了最后一步了，在GoodsModel上再添加一个buyNum属性来表示将要购买的商品数量，并在点选了右边的数量+-事件里面关联起来，然后最后这步也就变得水到渠成一样了</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//数量+ -事件</span></div><div class="line">- (<span class="keyword">void</span>)changeNumber:(<span class="built_in">UIButton</span> *)button&#123;</div><div class="line">   shopingCellTableViewCell *cell = (shopingCellTableViewCell *)button.superview.superview;</div><div class="line">    <span class="built_in">NSIndexPath</span> *indexPath = [<span class="keyword">self</span>.tableview indexPathForCell:cell];</div><div class="line">    ShopModel *model_shop = <span class="keyword">self</span>.ShopsArray[indexPath.section];</div><div class="line">    <span class="built_in">NSMutableArray</span> *goodsArray = [GoodsModel mj_objectArrayWithKeyValuesArray:model_shop.goodsList]; </div><div class="line">    GoodsModel *model_goods = goodsArray[indexPath.row];</div><div class="line"></div><div class="line">    <span class="built_in">NSInteger</span> numbers = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (GoodsModel *modeltemp <span class="keyword">in</span> goodsArray) &#123;</div><div class="line">        numbers = numbers + modeltemp.buyNum;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">//利用tag区分+或-</span></div><div class="line">    <span class="keyword">if</span> (button.tag == <span class="number">10087</span>)&#123;</div><div class="line">        <span class="keyword">if</span> (numbers!=<span class="number">10</span>)&#123;<span class="comment">//限购10件</span></div><div class="line">            model_goods.buyNum++;</div><div class="line">        &#125;</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (button.tag == <span class="number">10086</span>)&#123;</div><div class="line">        <span class="keyword">if</span> (numbers!=<span class="number">0</span> &amp;&amp; model_goods.buyNum!=<span class="number">0</span>)&#123;</div><div class="line">            model_goods.buyNum--;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">   [<span class="keyword">self</span> totalMoney];</div><div class="line">   [<span class="keyword">self</span>.tableview reloadData];</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//这个就是前面无论点选哪个小红圈或者+ —数量都会调用的计算总价的方法</span></div><div class="line">- (<span class="keyword">void</span>)totalMoney&#123;</div><div class="line">    <span class="keyword">float</span> totalMoney = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (ShopModel *model_shop <span class="keyword">in</span> <span class="keyword">self</span>.ShopsArray) &#123;</div><div class="line">		<span class="built_in">NSMutableArray</span> *goodsArray = [GoodsModel mj_objectArrayWithKeyValuesArray:model_shop.goodsList]; </div><div class="line">        <span class="keyword">for</span> (GoodsModel *model_goods <span class="keyword">in</span> goodsArray) &#123;</div><div class="line">         	totalMoney = totalMoney + [model.goods_price integerValue] * model_goods.buyNum;</div><div class="line">    	&#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">self</span>.allLabel.text = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"￥%.2f"</span>, totalMoney];</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/01/27/常见购物车的简单实现方式/" data-id="cjcx6qcz7000zdripm05v7mtp" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/总结/">总结</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/购物车/">购物车</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-iOS常用扩展工具类（只为你的开发能更得心应手~）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/01/07/iOS常用扩展工具类（只为你的开发能更得心应手~）/" class="article-date">
  <time datetime="2018-01-07T09:21:01.617Z" itemprop="datePublished">2018-01-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/07/iOS常用扩展工具类（只为你的开发能更得心应手~）/">iOS常用扩展工具类（只为你的开发能更得心应手~）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h4 id="本帖只做个汇总以及简单的介绍，具体的效果以及使用说明请点击超链接跳转查看"><a href="#本帖只做个汇总以及简单的介绍，具体的效果以及使用说明请点击超链接跳转查看" class="headerlink" title="本帖只做个汇总以及简单的介绍，具体的效果以及使用说明请点击超链接跳转查看~"></a>本帖只做个汇总以及简单的介绍，具体的效果以及使用说明请点击超链接跳转查看~</h4><p>注：本帖长期更新，但具体更新时间不定<em>(:з」∠)</em></p>
<h3 id="1、UIview拓展类"><a href="#1、UIview拓展类" class="headerlink" title="1、UIview拓展类"></a>1、<a href="https://github.com/TQMAX/iOS-Commons-ViewFrameGeometry" target="_blank" rel="external">UIview拓展类</a></h3><p>我们在开发中经常需要获取或者改变控件的位置以及大小，这个时候这种类的价值就能体现出来了，你可以通过它来轻松方便（真的炒鸡方便呢）地任意改变控件的位置以及大小（动画中也很方便喔），直接戳上面链接查看具体详情吧~</p>
<h3 id="2、NSString拓展类"><a href="#2、NSString拓展类" class="headerlink" title="2、NSString拓展类"></a>2、<a href="https://github.com/TQMAX/iOS-Commons-NSStringGeometry" target="_blank" rel="external">NSString拓展类</a></h3><p>在做项目中对字符串的处理是必不可少的，或者要对一些数据进行字符串的转换等等。这里就介绍几个自己在项目中经常使用的方法。这里的category包括：时间戳转化为字符串的各类形式，获取当前设备deviceId和字符串向富文本的转换等等</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/01/07/iOS常用扩展工具类（只为你的开发能更得心应手~）/" data-id="cjcx6qcyd0008dripppy2fxvh" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/工具/">工具</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/总结/">总结</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/拓展/">拓展</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-常见的TabBar框架+多Tap处理的小Demo" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/01/01/常见的TabBar框架+多Tap处理的小Demo/" class="article-date">
  <time datetime="2018-01-01T13:31:34.235Z" itemprop="datePublished">2018-01-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/01/常见的TabBar框架+多Tap处理的小Demo/">常见的TabBar框架+多Tap处理的小Demo</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="（2018年的第一天，算是献给自己的新年礼物吧O-∩-∩-O-）"><a href="#（2018年的第一天，算是献给自己的新年礼物吧O-∩-∩-O-）" class="headerlink" title="（2018年的第一天，算是献给自己的新年礼物吧O(∩_∩)O~~）"></a>（2018年的第一天，算是献给自己的新年礼物吧O(∩_∩)O~~）</h2><h3 id="效果具体看图吧，内容详见Demo，如有其它想法，欢迎与我交流"><a href="#效果具体看图吧，内容详见Demo，如有其它想法，欢迎与我交流" class="headerlink" title="效果具体看图吧，内容详见Demo，如有其它想法，欢迎与我交流~"></a>效果具体看图吧，<a href="https://github.com/TQMAX/TQ_FrameDemo" target="_blank" rel="external">内容详见Demo，如有其它想法，欢迎与我交流~</a></h3><h3 id="1、整个框架效果"><a href="#1、整个框架效果" class="headerlink" title="1、整个框架效果"></a>1、整个框架效果</h3><p><img src="https://github.com/TQMAX/Markdown-Res/blob/master/Res/%20001.gif?raw=true" alt=""></p>
<h3 id="2、按钮分tap，内容不是堆在同一个controller里面，而是在ScrollView上添加其他的controller内容"><a href="#2、按钮分tap，内容不是堆在同一个controller里面，而是在ScrollView上添加其他的controller内容" class="headerlink" title="2、按钮分tap，内容不是堆在同一个controller里面，而是在ScrollView上添加其他的controller内容"></a>2、按钮分tap，内容不是堆在同一个controller里面，而是在ScrollView上添加其他的controller内容</h3><p><img src="https://github.com/TQMAX/Markdown-Res/blob/master/Res/%20002.gif?raw=true" alt=""></p>
<h3 id="3、和图2显示效果差不多，但是方法不同，封装了一下，tap的数量由数组定义，并且添加了和ScrollView不冲突的滑动返回手势！（其实是引用了搭档的手势🤣，详见-原手势demo）"><a href="#3、和图2显示效果差不多，但是方法不同，封装了一下，tap的数量由数组定义，并且添加了和ScrollView不冲突的滑动返回手势！（其实是引用了搭档的手势🤣，详见-原手势demo）" class="headerlink" title="3、和图2显示效果差不多，但是方法不同，封装了一下，tap的数量由数组定义，并且添加了和ScrollView不冲突的滑动返回手势！（其实是引用了搭档的手势🤣，详见 原手势demo）"></a>3、和图2显示效果差不多，但是方法不同，封装了一下，tap的数量由数组定义，并且添加了和ScrollView不冲突的滑动返回手势！（其实是引用了搭档的手势🤣，详见 <a href="https://github.com/xingtianwuganqi/PopGestureRecognizer" target="_blank" rel="external">原手势demo</a>）</h3><p><img src="https://github.com/TQMAX/Markdown-Res/blob/master/Res/%20003.gif?raw=true" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/01/01/常见的TabBar框架+多Tap处理的小Demo/" data-id="cjcx6qcz90011drip8ushx5dp" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Demo/">Demo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/多Tap/">多Tap</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/框架/">框架</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-透明状态栏" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/31/透明状态栏/" class="article-date">
  <time datetime="2017-12-31T09:16:38.156Z" itemprop="datePublished">2017-12-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/31/透明状态栏/">透明状态栏</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h3 id="效果如下："><a href="#效果如下：" class="headerlink" title="效果如下："></a>效果如下：</h3><p><img src="https://github.com/TQMAX/Markdown-Res/blob/master/Res/透明状态栏.png?raw=true" alt=""></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)viewWillAppear:(<span class="built_in">BOOL</span>)animated&#123;</div><div class="line">    [<span class="keyword">super</span> viewWillAppear:animated];</div><div class="line">    </div><div class="line">    <span class="comment">//状态栏设置透明</span></div><div class="line">    <span class="keyword">self</span>.navigationController.navigationBar.translucent = <span class="literal">YES</span>;</div><div class="line">    [<span class="keyword">self</span>.navigationController.navigationBar setBackgroundImage:[<span class="built_in">UIImage</span> new] forBarMetrics:<span class="built_in">UIBarMetricsDefault</span>];</div><div class="line">    <span class="keyword">self</span>.navigationController.navigationBar.shadowImage = [<span class="built_in">UIImage</span> new];</div><div class="line"></div><div class="line">    <span class="comment">//设置前景文字为白色</span></div><div class="line">    <span class="keyword">self</span>.navigationController.navigationBar.barStyle = <span class="built_in">UIBarStyleBlack</span>;</div><div class="line"></div><div class="line">   <span class="comment">//标题设置样式</span></div><div class="line">    <span class="keyword">self</span>.navigationController.navigationBar.titleTextAttributes=@&#123;<span class="built_in">NSForegroundColorAttributeName</span>:<span class="built_in">UIColorFromRGB</span>(<span class="number">0xffffff</span>),<span class="built_in">NSFontAttributeName</span>:[<span class="built_in">UIFont</span> fontWithName:<span class="string">@"HiraKakuProN-W6"</span> size:<span class="number">18</span>]&#125;;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)viewWillDisappear:(<span class="built_in">BOOL</span>)animated&#123;</div><div class="line">    [<span class="keyword">super</span> viewWillDisappear:animated];</div><div class="line">    <span class="comment">//还原前景文字颜色</span></div><div class="line">    <span class="keyword">self</span>.navigationController.navigationBar.barStyle = <span class="built_in">UIBarStyleDefault</span>;</div><div class="line">    <span class="keyword">self</span>.navigationController.navigationBar.translucent = <span class="literal">NO</span>;</div><div class="line">    <span class="comment">//还原回状态栏原来的样子</span></div><div class="line">    <span class="keyword">self</span>.navigationController.navigationBar.titleTextAttributes=@&#123;<span class="built_in">NSForegroundColorAttributeName</span>:<span class="built_in">UIColorFromRGB</span>(<span class="number">0xff386b</span>),<span class="built_in">NSFontAttributeName</span>:[<span class="built_in">UIFont</span> fontWithName:<span class="string">@"HiraKakuProN-W6"</span> size:<span class="number">15</span>]&#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/12/31/透明状态栏/" data-id="cjcx6qczp001gdrip4opsp8gd" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/状态栏/">状态栏</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/透明/">透明</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-iOS计算一段代码执行时间" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/10/iOS计算一段代码执行时间/" class="article-date">
  <time datetime="2017-12-10T04:45:51.745Z" itemprop="datePublished">2017-12-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/10/iOS计算一段代码执行时间/">iOS计算一段代码执行时间</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>不啰嗦，直接上代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">CFAbsoluteTime startTime =CFAbsoluteTimeGetCurrent();</div><div class="line"></div><div class="line">//在这写入要计算时间的代码</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">CFAbsoluteTime linkTime = (CFAbsoluteTimeGetCurrent() - startTime);</div><div class="line"></div><div class="line">NSLog(@&quot;Linked in %f ms&quot;, linkTime *1000.0);</div><div class="line"></div><div class="line">//打印出来为代码执行时间 单位ms</div></pre></td></tr></table></figure>
<p>OpenGL ES 里面的一段代码</p>
<p>ep:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">//START:link</div><div class="line">- (BOOL)link</div><div class="line">&#123;</div><div class="line">	CFAbsoluteTime startTime =CFAbsoluteTimeGetCurrent();</div><div class="line">	GLintstatus;</div><div class="line">	glLinkProgram(program);</div><div class="line">	glGetProgramiv(program,GL_LINK_STATUS, &amp;status);</div><div class="line">	if(status ==GL_FALSE)</div><div class="line">	returnNO;</div><div class="line">	if(vertShader)&#123;</div><div class="line">		glDeleteShader(vertShader);</div><div class="line">		vertShader=0;</div><div class="line">	&#125;</div><div class="line">	if(fragShader)&#123;</div><div class="line">		glDeleteShader(fragShader);</div><div class="line">		fragShader=0;</div><div class="line">	&#125;</div><div class="line">	CFAbsoluteTime linkTime = (CFAbsoluteTimeGetCurrent() - startTime);</div><div class="line">	NSLog(@&quot;Linked in %f ms&quot;, linkTime *1000.0);</div><div class="line">	returnYES;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/12/10/iOS计算一段代码执行时间/" data-id="cjcx6qcyl000fdrip5m9pjyiq" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/调试/">调试</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-高效开发之KVC干货小技巧" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/10/高效开发之KVC干货小技巧/" class="article-date">
  <time datetime="2017-12-10T04:39:42.670Z" itemprop="datePublished">2017-12-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/10/高效开发之KVC干货小技巧/">高效开发之KVC干货小技巧</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h3 id="获取数组里的-求和、平均、最大、最小"><a href="#获取数组里的-求和、平均、最大、最小" class="headerlink" title="获取数组里的, 求和、平均、最大、最小"></a>获取数组里的, 求和、平均、最大、最小</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSArray</span> *array = @[<span class="string">@"1"</span>,<span class="string">@"3"</span>,@<span class="number">2</span>,@<span class="number">9.5</span>,<span class="string">@"1.2"</span>]; </div><div class="line"><span class="built_in">NSNumber</span> *sum = [array valueForKeyPath:<span class="string">@"@sum.floatValue"</span>]; </div><div class="line"><span class="built_in">NSNumber</span> *avg = [array valueForKeyPath:<span class="string">@"@avg.floatValue"</span>]; </div><div class="line"><span class="built_in">NSNumber</span> *max = [array valueForKeyPath:<span class="string">@"@max.floatValue"</span>]; </div><div class="line"><span class="built_in">NSNumber</span> *min = [array valueForKeyPath:<span class="string">@"@min.floatValue"</span>];  </div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"sum:%@"</span>,sum); </div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"avg:%@"</span>,avg);</div><div class="line"> <span class="built_in">NSLog</span>(<span class="string">@"max:%@"</span>,max); </div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"min:%@"</span>,min);</div></pre></td></tr></table></figure>
<h3 id="删除重复数据"><a href="#删除重复数据" class="headerlink" title="删除重复数据"></a>删除重复数据</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSArray</span> *array = @[<span class="string">@"name"</span>, <span class="string">@"w"</span>, <span class="string">@"aa"</span>, <span class="string">@"zxp"</span>, <span class="string">@"aa"</span>]; <span class="comment">//返回的是一个新的数组</span></div><div class="line"> <span class="built_in">NSArray</span> *newArray = [array valueForKeyPath:<span class="string">@"@distinctUnionOfObjects.self"</span>]; </div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, newArray);</div></pre></td></tr></table></figure>
<h3 id="同样可以嵌套使用，先剔除name对应值的重复数据再取值"><a href="#同样可以嵌套使用，先剔除name对应值的重复数据再取值" class="headerlink" title="同样可以嵌套使用，先剔除name对应值的重复数据再取值"></a>同样可以嵌套使用，先剔除name对应值的重复数据再取值</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSArray</span> *array = @[ @&#123;<span class="string">@"title"</span>:<span class="string">@"zxp"</span>,<span class="string">@"name"</span>:<span class="string">@"zhangxiaoping"</span>&#125;, @&#123;<span class="string">@"title"</span>:<span class="string">@"zxp2"</span>,<span class="string">@"name"</span>:<span class="string">@"zhangxiaoping2"</span>&#125;, @&#123;<span class="string">@"title"</span>:<span class="string">@"zxp"</span>,<span class="string">@"name"</span>:<span class="string">@"zhangxiaoping3"</span>&#125;, @&#123;<span class="string">@"title"</span>:<span class="string">@"zxp"</span>,<span class="string">@"name"</span>:<span class="string">@"zhangxiaoping"</span>&#125;];</div><div class="line"><span class="comment">//根据name字段，来进行重复删除。</span></div><div class="line"><span class="built_in">NSArray</span> *newArray = [array valueForKeyPath:<span class="string">@"@distinctUnionOfObjects.name"</span>];</div><div class="line"><span class="comment">//如果要根据title字段来删除重名的写法为`@distinctUnionOfObjects.title` </span></div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, newArray);</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">print:( zhangxiaoping3, zhangxiaoping2, zhangxiaoping)是一个字符串数组*/</span></div></pre></td></tr></table></figure>
<h3 id="进行实例方法的调用"><a href="#进行实例方法的调用" class="headerlink" title="进行实例方法的调用"></a>进行实例方法的调用</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSArray</span> *array = @[<span class="string">@"name"</span>, <span class="string">@"w"</span>, <span class="string">@"aa"</span>, <span class="string">@"ZXPing"</span>]; </div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, [array valueForKeyPath:<span class="string">@"uppercaseString"</span>]);</div></pre></td></tr></table></figure>
<p>相当于数组中的每个成员执行了uppercaseString方法，然后把返回的对象组成一个新数组返回。既然可以用uppercaseString方法，那么NSString的其他方法也可以，比如[array valueForKeyPath:@”length”]。当然，其他对象的实例方法也可以以此类推来进行调用~！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/12/10/高效开发之KVC干货小技巧/" data-id="cjcx6qczu001mdripsy59t4zh" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/KVC/">KVC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/高效/">高效</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-iOS 常用组件-高效切圆角方法总结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/10/iOS 常用组件-高效切圆角方法总结/" class="article-date">
  <time datetime="2017-12-10T04:20:01.262Z" itemprop="datePublished">2017-12-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/10/iOS 常用组件-高效切圆角方法总结/">iOS 常用组件-高效切圆角方法总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>iOS 客户端开发中，经常碰到圆角视图的需求，本文简单总结一下 UIView 及其子类的一些切圆角方法，并且保证避免出现离屏渲染。</p>
<h4 id="UIView（不包括其子类）"><a href="#UIView（不包括其子类）" class="headerlink" title="UIView（不包括其子类）"></a>UIView（不包括其子类）</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">UIView</span> *view = [[<span class="built_in">UIView</span> alloc] init];</div><div class="line">view.backgroundColor = [<span class="built_in">UIColor</span> blackColor];</div><div class="line">view.layer.cornerRadius = <span class="number">3.</span>f;</div><div class="line"><span class="comment">// 以下两行，任写一行</span></div><div class="line">view.layer.masksToBounds = <span class="literal">NO</span>;</div><div class="line">view.clipToBounds = <span class="literal">NO</span>;</div><div class="line"><span class="comment">// 以下两行，千万不要加！</span></div><div class="line">view.layer.masksToBounds = <span class="literal">YES</span>;</div><div class="line">view.clipToBounds = <span class="literal">YES</span>;</div></pre></td></tr></table></figure>
<p>注意点：UIView 只要设置图层的 cornerRadius 属性即可（不明白的话，可以看看官方文档里对 cornerRadius 的描述），如果设置 layer.masksToBounds = YES，会造成不必要的离屏渲染。</p>
<h4 id="文本类视图"><a href="#文本类视图" class="headerlink" title="文本类视图"></a>文本类视图</h4><h4 id="1、UITextField"><a href="#1、UITextField" class="headerlink" title="1、UITextField"></a>1、UITextField</h4><p>UITextField有两种实现方法</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 天然支持设置圆角边框</span></div><div class="line"><span class="built_in">UITextField</span> *textField = [[<span class="built_in">UITextField</span> alloc] init];</div><div class="line">textField.borderStyle = <span class="built_in">UITextBorderStyleRoundedRect</span>;</div></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 与 UIView 类似</span></div><div class="line"><span class="built_in">UITextField</span> *textField = [[<span class="built_in">UITextField</span> alloc] init];</div><div class="line">textField.layer.cornerRadius = cornerRadius;</div></pre></td></tr></table></figure>
<h4 id="2、UITextView"><a href="#2、UITextView" class="headerlink" title="2、UITextView"></a>2、UITextView</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 与 UIView 类似</span></div><div class="line"><span class="built_in">UITextView</span> *textView = [[<span class="built_in">UITextView</span> alloc] init];</div><div class="line">textView.layer.cornerRadius = cornerRadius;</div></pre></td></tr></table></figure>
<h4 id="3、UILabel"><a href="#3、UILabel" class="headerlink" title="3、UILabel"></a>3、UILabel</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">UILabel</span> *label = [[<span class="built_in">UILabel</span> alloc] init];</div><div class="line"><span class="comment">// 重点在此！！设置视图的图层背景色，千万不要直接设置 label.backgroundColor</span></div><div class="line">label.layer.backgroundColor = [<span class="built_in">UIColor</span> grayColor].CGColor;</div><div class="line">label.layer.cornerRadius = cornerRadius;</div></pre></td></tr></table></figure>
<h3 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h3><h4 id="1、UIButton"><a href="#1、UIButton" class="headerlink" title="1、UIButton"></a>1、UIButton</h4><p>说明：UIButton 的背景图片，如果是复杂的图片，可以依靠 UI 切图来实现。如果是简单的纯色背景图片，可以利用代码绘制带圆角的图片。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">UIButton</span> *button = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeCustom</span>];</div><div class="line"><span class="comment">// 设置 UIButton 的背景图片。</span></div><div class="line">[button setBackgroundImage:image forState:<span class="built_in">UIControlStateNormal</span>];</div></pre></td></tr></table></figure>
<p>背景图片绘制方法</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">+ (<span class="built_in">UIImage</span> *)pureColorImageWithSize:(<span class="built_in">CGSize</span>)size color:(<span class="built_in">UIColor</span> *)color cornRadius:(<span class="built_in">CGFloat</span>)cornRadius &#123;</div><div class="line">  <span class="built_in">UIView</span> *view = [[<span class="built_in">UIView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0.0</span>f, <span class="number">0.0</span>f, size.width, size.height)];</div><div class="line">  view.backgroundColor = color;</div><div class="line">  view.layer.cornerRadius = cornerRadius;</div><div class="line">  <span class="comment">// 下面方法，第一个参数表示区域大小。第二个参数表示是否是非透明的。如果需要显示半透明效果，需要传NO，否则传YES。第三个参数是屏幕密度</span></div><div class="line">  <span class="built_in">UIGraphicsBeginImageContextWithOptions</span>(view.bounds.size, <span class="literal">NO</span>, [<span class="built_in">UIScreen</span> mainScreen].scale);</div><div class="line">  [view.layer renderInContext:<span class="built_in">UIGraphicsGetCurrentContext</span>()];</div><div class="line">  <span class="built_in">UIImage</span> *image = <span class="built_in">UIGraphicsGetImageFromCurrentImageContext</span>();</div><div class="line">  <span class="built_in">UIGraphicsEndImageContext</span>();</div><div class="line">  <span class="keyword">return</span> image;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="2、UIImageView"><a href="#2、UIImageView" class="headerlink" title="2、UIImageView"></a>2、UIImageView</h4><p>UIImageView 有三种方式实现圆角：</p>
<ul>
<li>贝塞尔曲线切割圆角</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">UIImageView</span> *)roundedRectImageViewWithCornerRadius:(<span class="built_in">CGFloat</span>)cornerRadius &#123;</div><div class="line">    <span class="built_in">UIBezierPath</span> *bezierPath = [<span class="built_in">UIBezierPath</span> bezierPathWithRoundedRect:<span class="keyword">self</span>.bounds cornerRadius:cornerRadius];</div><div class="line">    <span class="built_in">CAShapeLayer</span> *layer = [<span class="built_in">CAShapeLayer</span> layer];</div><div class="line">    layer.path = bezierPath.CGPath;</div><div class="line">    <span class="keyword">self</span>.layer.mask = layer;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>绘制四个角的遮罩（使用场景受限）</li>
</ul>
<p>在 UIImageView 上添加一个四个角有内容，其它部分是透明的视图，只对 UIImageView 圆角部分进行遮挡。但要保证被遮挡的部分背景色要与周围背景相同，避免穿帮。所以当 UIImageView 处于一个复杂的背景时，是不适合使用这个方法的。</p>
<ul>
<li>最不推荐做法（当一个页面只有少量圆角图片时才推荐使用）</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">UIImageView</span> *imageView = [[<span class="built_in">UIImageView</span> alloc] init];</div><div class="line">imageView.layer.cornerRadius = <span class="number">5.</span>f;</div><div class="line">imageView.layer.masksToBounds = <span class="literal">YES</span>;</div></pre></td></tr></table></figure>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>以上是开发过程常用组件的切圆角方法总结，如果有更好的方法或者文中有不对的地方，还请指正提出，谢谢。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/12/10/iOS 常用组件-高效切圆角方法总结/" data-id="cjcx6qcyj000cdripi0x2rmtt" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/圆角/">圆角</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/总结/">总结</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-常见手势(敲击:旋转:捏合:长按:轻扫:混合等)" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/26/常见手势(敲击:旋转:捏合:长按:轻扫:混合等)/" class="article-date">
  <time datetime="2017-11-26T08:17:22.384Z" itemprop="datePublished">2017-11-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/26/常见手势(敲击:旋转:捏合:长按:轻扫:混合等)/">常见手势(敲击/旋转/捏合/长按/轻扫/混合等)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h3 id="所有手势都要添加代理UIGestureRecognizerDelegate"><a href="#所有手势都要添加代理UIGestureRecognizerDelegate" class="headerlink" title="所有手势都要添加代理UIGestureRecognizerDelegate"></a>所有手势都要添加代理UIGestureRecognizerDelegate</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> *  多个手势同时存在的代理,不能忘记</div><div class="line"> */</div><div class="line">-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer&#123;</div><div class="line">    return YES;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>1、敲击手势（图片需允许交互）</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</div><div class="line">    [<span class="keyword">super</span> viewDidLoad];</div><div class="line">    <span class="comment">// Do any additional setup after loading the view.</span></div><div class="line">    [<span class="keyword">self</span>.view setBackgroundColor:[<span class="built_in">UIColor</span> whiteColor]];</div><div class="line">    <span class="keyword">self</span>.title = <span class="string">@"敲击手势"</span>;</div><div class="line"></div><div class="line">    <span class="keyword">self</span>.imgView = [[<span class="built_in">UIImageView</span> alloc]initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">20</span>, <span class="number">100</span>, <span class="number">300</span>, <span class="number">200</span>)];</div><div class="line">    [<span class="keyword">self</span>.imgView setImage:[<span class="built_in">UIImage</span> imageNamed:<span class="string">@"img"</span>]];</div><div class="line">    [<span class="keyword">self</span>.view addSubview:<span class="keyword">self</span>.imgView];</div><div class="line"></div><div class="line">    <span class="comment">//图片允许交互,别忘记设置,否则手势没有反应</span></div><div class="line">    [<span class="keyword">self</span>.imgView setUserInteractionEnabled:<span class="literal">YES</span>];</div><div class="line"></div><div class="line">    <span class="comment">//1.创建一个"敲击手势"对象</span></div><div class="line">    <span class="built_in">UITapGestureRecognizer</span> *tapGest = [[<span class="built_in">UITapGestureRecognizer</span> alloc]init];</div><div class="line"></div><div class="line">    <span class="comment">//2.设置敲击次数</span></div><div class="line">    tapGest.numberOfTapsRequired = <span class="number">1</span>;</div><div class="line"></div><div class="line">    <span class="comment">//3.手指头数量,默认不写</span></div><div class="line"><span class="comment">//    tapGest.numberOfTouchesRequired = 2;</span></div><div class="line"></div><div class="line">    <span class="comment">//4.代理</span></div><div class="line">    tapGest.delegate =<span class="keyword">self</span>;</div><div class="line"></div><div class="line">    <span class="comment">//5.手势添加到View</span></div><div class="line">    [<span class="keyword">self</span>.imgView addGestureRecognizer:tapGest];</div><div class="line"></div><div class="line">    <span class="comment">//6.手势监听方法</span></div><div class="line">    [tapGest addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(tapGestMethod:)];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> *  监听方法</span></div><div class="line"><span class="comment"> */</span></div><div class="line">-(<span class="keyword">void</span>)tapGestMethod:(<span class="built_in">UITapGestureRecognizer</span> *)tapGest&#123;</div><div class="line"></div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"可以点击了:%s"</span>,__func__);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> *  手势代理 (实现view只能左边点击,右边无效)</span></div><div class="line"><span class="comment"> */</span></div><div class="line">-(<span class="built_in">BOOL</span>)gestureRecognizer:(<span class="built_in">UIGestureRecognizer</span> *)gestureRecognizer shouldReceiveTouch:(<span class="built_in">UITouch</span> *)touch&#123;</div><div class="line"></div><div class="line">    <span class="built_in">CGPoint</span> location = [touch locationInView:touch.view];</div><div class="line">    <span class="keyword">if</span> (location.x&lt;= touch.view.bounds.size.width/<span class="number">2</span>) &#123;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">NO</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>2、长按手势</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">- (void)viewDidLoad &#123;</div><div class="line">    [super viewDidLoad];</div><div class="line"></div><div class="line">    [self.view setBackgroundColor:[UIColor whiteColor]];</div><div class="line">    self.title = @&quot;长按手势&quot;;</div><div class="line"></div><div class="line">    self.imgView = [[UIImageView alloc]initWithFrame:CGRectMake(20, 100, 80, 80)];</div><div class="line">    [self.imgView setImage:[UIImage imageNamed:@&quot;img&quot;]];</div><div class="line">    [self.view addSubview:self.imgView];</div><div class="line"></div><div class="line">    //图片允许交互,别忘记设置,否则手势没有反应</div><div class="line">    [self.imgView setUserInteractionEnabled:YES];</div><div class="line"></div><div class="line">    //初始化一个长按手势</div><div class="line">    UILongPressGestureRecognizer *longPressGest = [[UILongPressGestureRecognizer alloc]initWithTarget:self action:@selector(longPressView:)];</div><div class="line"></div><div class="line">    //长按等待时间</div><div class="line">    longPressGest.minimumPressDuration = 3;</div><div class="line"></div><div class="line">    //长按时候,手指头可以移动的距离</div><div class="line">    longPressGest.allowableMovement = 30;</div><div class="line">    [self.imgView addGestureRecognizer:longPressGest];</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)longPressView:(UILongPressGestureRecognizer *)longPressGest&#123;</div><div class="line"></div><div class="line">    NSLog(@&quot;%ld&quot;,longPressGest.state);//只有这样手势才不会连续运行多次</div><div class="line">    if (longPressGest.state==UIGestureRecognizerStateBegan) &#123;</div><div class="line">       NSLog(@&quot;长按手势开启&quot;);</div><div class="line">    &#125; else &#123;</div><div class="line">        NSLog(@&quot;长按手势结束&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3、旋转手势</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</div><div class="line">    [<span class="keyword">super</span> viewDidLoad];</div><div class="line"></div><div class="line">    [<span class="keyword">self</span>.view setBackgroundColor:[<span class="built_in">UIColor</span> whiteColor]];</div><div class="line">    <span class="keyword">self</span>.title = <span class="string">@"旋转手势"</span>;</div><div class="line"></div><div class="line">    <span class="keyword">self</span>.imgView = [[<span class="built_in">UIImageView</span> alloc]initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">80</span>, <span class="number">100</span>, <span class="number">160</span>, <span class="number">160</span>)];</div><div class="line">    [<span class="keyword">self</span>.imgView setImage:[<span class="built_in">UIImage</span> imageNamed:<span class="string">@"img"</span>]];</div><div class="line">    [<span class="keyword">self</span>.view addSubview:<span class="keyword">self</span>.imgView];</div><div class="line"></div><div class="line">    <span class="comment">//图片允许交互,别忘记设置,否则手势没有反应</span></div><div class="line">    [<span class="keyword">self</span>.imgView setUserInteractionEnabled:<span class="literal">YES</span>];</div><div class="line"></div><div class="line">    <span class="comment">//初始化一个旋转手势</span></div><div class="line">    <span class="built_in">UIRotationGestureRecognizer</span> *rotationGest = [[<span class="built_in">UIRotationGestureRecognizer</span> alloc]initWithTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(rotationView:)];</div><div class="line">    [<span class="keyword">self</span>.imgView addGestureRecognizer:rotationGest];</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(<span class="keyword">void</span>)rotationView:(<span class="built_in">UIRotationGestureRecognizer</span> *)rotationGest&#123;</div><div class="line"></div><div class="line">    <span class="comment">//旋转角度.也是一个累加过程</span></div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%f"</span>,rotationGest.rotation);</div><div class="line"></div><div class="line">    <span class="comment">//设置图片旋转</span></div><div class="line">    <span class="keyword">self</span>.imgView.transform = <span class="built_in">CGAffineTransformRotate</span>(<span class="keyword">self</span>.imgView.transform, rotationGest.rotation);</div><div class="line"></div><div class="line">    <span class="comment">//清除旋转角度累计</span></div><div class="line">    rotationGest.rotation = <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>4、拖拽手势</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</div><div class="line">    [<span class="keyword">super</span> viewDidLoad];</div><div class="line">    [<span class="keyword">self</span>.view setBackgroundColor:[<span class="built_in">UIColor</span> whiteColor]];</div><div class="line">    <span class="keyword">self</span>.title = <span class="string">@"拖拽手势"</span>;</div><div class="line"></div><div class="line">    <span class="keyword">self</span>.imgView = [[<span class="built_in">UIImageView</span> alloc]initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">20</span>, <span class="number">100</span>, <span class="number">80</span>, <span class="number">80</span>)];</div><div class="line">    [<span class="keyword">self</span>.imgView setImage:[<span class="built_in">UIImage</span> imageNamed:<span class="string">@"img"</span>]];</div><div class="line">    [<span class="keyword">self</span>.view addSubview:<span class="keyword">self</span>.imgView];</div><div class="line"></div><div class="line">    <span class="comment">//图片允许交互,别忘记设置,否则手势没有反应</span></div><div class="line">    [<span class="keyword">self</span>.imgView setUserInteractionEnabled:<span class="literal">YES</span>];</div><div class="line"></div><div class="line">   <span class="comment">//初始化一个拖拽手势</span></div><div class="line">    <span class="built_in">UIPanGestureRecognizer</span> *panGest = [[<span class="built_in">UIPanGestureRecognizer</span> alloc]initWithTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(panView:)];</div><div class="line">    [<span class="keyword">self</span>.imgView addGestureRecognizer:panGest];</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(<span class="keyword">void</span>)panView:(<span class="built_in">UIPanGestureRecognizer</span> *)panGest&#123;</div><div class="line"></div><div class="line">    <span class="comment">//拖拽的距离(距离是一个累加)</span></div><div class="line">    <span class="built_in">CGPoint</span> trans = [panGest translationInView:panGest.view];</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,<span class="built_in">NSStringFromCGPoint</span>(trans));</div><div class="line"></div><div class="line">    <span class="comment">//设置图片移动</span></div><div class="line">    <span class="built_in">CGPoint</span> center =  <span class="keyword">self</span>.imgView.center;</div><div class="line">    center.x += trans.x;</div><div class="line">    center.y += trans.y;</div><div class="line">    <span class="keyword">self</span>.imgView.center = center;</div><div class="line"></div><div class="line">    <span class="comment">//清除累加的距离</span></div><div class="line">    [panGest setTranslation:<span class="built_in">CGPointZero</span> inView:panGest.view];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>5、轻扫手势</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">- (void)viewDidLoad &#123;</div><div class="line">    [super viewDidLoad];</div><div class="line">    [self.view setBackgroundColor:[UIColor whiteColor]];</div><div class="line">    self.title = @&quot;轻扫手势&quot;;</div><div class="line"></div><div class="line">    self.imgView = [[UIImageView alloc]initWithFrame:CGRectMake(20, 100, 300, 200)];</div><div class="line">    [self.imgView setImage:[UIImage imageNamed:@&quot;img&quot;]];</div><div class="line">    [self.view addSubview:self.imgView];</div><div class="line"></div><div class="line">    //图片允许交互,别忘记设置,否则手势没有反应</div><div class="line">    [self.imgView setUserInteractionEnabled:YES];</div><div class="line"></div><div class="line">    //手势有四个方向,根据需要选择</div><div class="line">    //UISwipeGestureRecognizerDirectionRight 向右轻扫</div><div class="line">    //UISwipeGestureRecognizerDirectionLeft    向左轻扫</div><div class="line">    //UISwipeGestureRecognizerDirectionUp    向上</div><div class="line">    //UISwipeGestureRecognizerDirectionDown 向下</div><div class="line"></div><div class="line">    //初始化一个轻扫手势</div><div class="line">    UISwipeGestureRecognizer *swipeGest = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(swipeView:)];</div><div class="line">    [self.imgView addGestureRecognizer:swipeGest];</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)swipeView:(UISwipeGestureRecognizer *)swipeGest&#123;</div><div class="line"></div><div class="line">    NSLog(@&quot;手势状态:%ld&quot;,swipeGest.state);</div><div class="line"></div><div class="line">    //如何判断开始和跟结束</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>6、捏合手势(放大/缩小)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">- (void)viewDidLoad &#123;</div><div class="line">    [super viewDidLoad];</div><div class="line">    [self.view setBackgroundColor:[UIColor whiteColor]];</div><div class="line">    self.title = @&quot;捏合手势&quot;;</div><div class="line"></div><div class="line">    self.imgView = [[UIImageView alloc]initWithFrame:CGRectMake(20, 100, 300, 200)];</div><div class="line">    [self.imgView setImage:[UIImage imageNamed:@&quot;img&quot;]];</div><div class="line"></div><div class="line">    //图片允许交互,别忘记设置,否则手势没有反应</div><div class="line">    [self.imgView setUserInteractionEnabled:YES];</div><div class="line"></div><div class="line">    UIPinchGestureRecognizer *pinTap = [[UIPinchGestureRecognizer alloc]initWithTarget:self action:@selector(pinView:)];</div><div class="line">    [self.imgView addGestureRecognizer:pinTap];</div><div class="line"></div><div class="line">    [self.view addSubview:self.imgView];</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)pinView:(UIPinchGestureRecognizer *)pinGest&#123;</div><div class="line"></div><div class="line">    //缩放的比例是一个&quot;累加&quot;过程</div><div class="line">    NSLog(@&quot;%s----%f&quot;,__func__,pinGest.scale);</div><div class="line"></div><div class="line">#warning 放大图片后， 再次缩放的时候，马上回到原先的大小</div><div class="line">    //self.imageView.transform = CGAffineTransformMakeScale(pinGest.scale, pinGest.scale);</div><div class="line"></div><div class="line"></div><div class="line">    self.imgView.transform = CGAffineTransformScale(self.imgView.transform, pinGest.scale, pinGest.scale);</div><div class="line"></div><div class="line">    // 让比例还原，不要累加</div><div class="line">    // 解决办法，重新设置scale</div><div class="line">    pinGest.scale = 1;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>7、旋转+捏合+拖拽</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line">- (void)viewDidLoad &#123;</div><div class="line">    [super viewDidLoad];</div><div class="line">    [self.view setBackgroundColor:[UIColor whiteColor]];</div><div class="line">    self.title = @&quot;旋转+捏合+拖拽&quot;;</div><div class="line"></div><div class="line">    self.imgView = [[UIImageView alloc]initWithFrame:CGRectMake(20, 100, 300, 200)];</div><div class="line">    [self.imgView setImage:[UIImage imageNamed:@&quot;img&quot;]];</div><div class="line">    [self.view addSubview:self.imgView];</div><div class="line">    //图片允许交互,别忘记设置,否则手势没有反应</div><div class="line">    [self.imgView setUserInteractionEnabled:YES];</div><div class="line"></div><div class="line"></div><div class="line">    //默认情况下,控件只能监听一种手势</div><div class="line">    //如果要监听到多个手势,设置代理方法,告知允许多个手势存在</div><div class="line"></div><div class="line">    //旋转</div><div class="line">    UIRotationGestureRecognizer *rotaitonGest = [[UIRotationGestureRecognizer alloc]initWithTarget:self action:@selector(rotationView:)];</div><div class="line">    rotaitonGest.delegate =self;</div><div class="line">    [self.imgView addGestureRecognizer:rotaitonGest];</div><div class="line"></div><div class="line">    //捏合</div><div class="line">    UIPinchGestureRecognizer *pinchGest = [[UIPinchGestureRecognizer alloc]initWithTarget:self action:@selector(pinchView:)];</div><div class="line">    [self.imgView addGestureRecognizer:pinchGest];</div><div class="line"></div><div class="line">    //拖拽</div><div class="line">    UIPanGestureRecognizer *panGest = [[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(panView:)];</div><div class="line">    [self.imgView addGestureRecognizer:panGest];</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)rotationView:(UIRotationGestureRecognizer *)rotationGest&#123;</div><div class="line"></div><div class="line">    //旋转角度</div><div class="line">    //旋转的角度也一个累加的过程</div><div class="line">    NSLog(@&quot;旋转角度 %f&quot;,rotationGest.rotation);</div><div class="line"></div><div class="line">    // 设置图片的旋转</div><div class="line">    self.imgView.transform = CGAffineTransformRotate(self.imgView.transform, rotationGest.rotation);</div><div class="line"></div><div class="line">    // 清除 &quot;旋转角度&quot; 的累</div><div class="line">    rotationGest.rotation = 0;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)pinchView:(UIPinchGestureRecognizer *)pinchGest&#123;</div><div class="line">    //设置图片缩放</div><div class="line"></div><div class="line">    self.imgView.transform = CGAffineTransformScale(self.imgView.transform, pinchGest.scale, pinchGest.scale);</div><div class="line"></div><div class="line">    // 还源</div><div class="line">    pinchGest.scale = 1;</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)panView:(UIPanGestureRecognizer *)panGest&#123;</div><div class="line"></div><div class="line">    //拖拽的距离(距离是一个累加)</div><div class="line">    CGPoint trans = [panGest translationInView:panGest.view];</div><div class="line">    NSLog(@&quot;%@&quot;,NSStringFromCGPoint(trans));</div><div class="line"></div><div class="line">    //设置图片移动</div><div class="line">    CGPoint center =  self.imgView.center;</div><div class="line">    center.x += trans.x;</div><div class="line">    center.y += trans.y;</div><div class="line">    self.imgView.center = center;</div><div class="line"></div><div class="line">    //清除累加的距离</div><div class="line">    [panGest setTranslation:CGPointZero inView:panGest.view];</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> *  多个手势同时存在的代理,不能忘记</div><div class="line"> */</div><div class="line">-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer&#123;</div><div class="line"></div><div class="line">    return YES;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/26/常见手势(敲击:旋转:捏合:长按:轻扫:混合等)/" data-id="cjcx6qcz4000xdrip80trn2re" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/手势、只执行一遍/">手势、只执行一遍</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-确保代码在程序生命周期运行中只执行一遍" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/26/确保代码在程序生命周期运行中只执行一遍/" class="article-date">
  <time datetime="2017-11-26T07:58:37.826Z" itemprop="datePublished">2017-11-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/26/确保代码在程序生命周期运行中只执行一遍/">确保代码在程序生命周期运行中只执行一遍</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> disOnce;<span class="comment">//定义静态变量disOnce</span></div><div class="line"></div><div class="line"><span class="built_in">dispatch_once</span>(&amp;disOnce,  ^ &#123;</div><div class="line">        <span class="comment">// 该干嘛就干嘛</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/26/确保代码在程序生命周期运行中只执行一遍/" data-id="cjcx6qczh0019drippiw7ysty" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/只执行一遍/">只执行一遍</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-UICollectionView格式示例模板" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/26/UICollectionView格式示例模板/" class="article-date">
  <time datetime="2017-11-26T07:45:38.892Z" itemprop="datePublished">2017-11-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/26/UICollectionView格式示例模板/">UICollectionView格式示例模板</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>注：（只含collectView主体，包括头尾视图（需另外定义））<br>先添加代理：<uicollectionviewdelegate,uicollectionviewdatasource></uicollectionviewdelegate,uicollectionviewdatasource></p>
<p>若一个类中含多个UICollectionView，需使用不同的UICollectionViewFlowLayout，即不可共用同一个UICollectionViewFlowLayout<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UICollectionView</span> *collectionView;</div><div class="line"></div><div class="line"></div><div class="line">-(<span class="keyword">void</span>)setupCollection&#123;</div><div class="line">    <span class="built_in">UICollectionViewFlowLayout</span> *flowlayout = [[<span class="built_in">UICollectionViewFlowLayout</span> alloc]init];</div><div class="line">    [flowlayout setItemSize:<span class="built_in">CGSizeMake</span>((ScreenW - <span class="number">24</span>)/<span class="number">4</span> , (ScreenW)/<span class="number">4</span>)];</div><div class="line">    flowlayout.sectionInset = <span class="built_in">UIEdgeInsetsMake</span>(<span class="number">15</span>, <span class="number">8</span>, <span class="number">15</span>, <span class="number">8</span>);<span class="comment">//上、左、下、右</span></div><div class="line">    flowlayout.minimumLineSpacing = <span class="number">8</span>;</div><div class="line">    flowlayout.minimumInteritemSpacing = <span class="number">8</span>;</div><div class="line">    [flowlayout setScrollDirection:<span class="built_in">UICollectionViewScrollDirectionVertical</span>];</div><div class="line">    </div><div class="line">    <span class="keyword">self</span>.collectionView = [[<span class="built_in">UICollectionView</span> alloc]initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, ScreenW , ScreenH - <span class="number">64</span> - <span class="number">49</span>) collectionViewLayout:flowlayout];</div><div class="line">    <span class="keyword">self</span>.collectionView.backgroundColor = <span class="built_in">UIColorFromRGB</span>(<span class="number">0xffffff</span>);</div><div class="line">    <span class="keyword">self</span>.collectionView.dataSource = <span class="keyword">self</span>;</div><div class="line">    <span class="keyword">self</span>.collectionView.delegate = <span class="keyword">self</span>;</div><div class="line">    <span class="keyword">self</span>.collectionView.scrollEnabled = <span class="literal">YES</span>;</div><div class="line">    [<span class="keyword">self</span>.view addSubview:<span class="keyword">self</span>.collectionView];</div><div class="line">    [<span class="keyword">self</span>.collectionView registerClass:[UserInfoCell <span class="keyword">class</span>] forCellWithReuseIdentifier:<span class="string">@"collectionVIew"</span>];</div><div class="line">    <span class="comment">//注册头视图</span></div><div class="line">    [<span class="keyword">self</span>.collectionView registerClass:[<span class="built_in">UICollectionReusableView</span> <span class="keyword">class</span>] forSupplementaryViewOfKind:<span class="built_in">UICollectionElementKindSectionHeader</span> withReuseIdentifier:<span class="string">@"header"</span>];</div><div class="line">    [<span class="keyword">self</span>.collectionView registerClass:[<span class="built_in">UICollectionReusableView</span> <span class="keyword">class</span>] forSupplementaryViewOfKind:<span class="built_in">UICollectionElementKindSectionFooter</span> withReuseIdentifier:<span class="string">@"footer"</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(<span class="built_in">CGSize</span>)collectionView:(<span class="built_in">UICollectionView</span> *)collectionView layout:(<span class="built_in">UICollectionViewLayout</span> *)collectionViewLayout referenceSizeForHeaderInSection:(<span class="built_in">NSInteger</span>)section&#123;</div><div class="line">    <span class="built_in">CGSize</span> size=&#123;ScreenW,_headView.TQ_bottom&#125;;</div><div class="line">    <span class="keyword">return</span> size;</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(<span class="built_in">CGSize</span>)collectionView:(<span class="built_in">UICollectionView</span> *)collectionView layout:(<span class="built_in">UICollectionViewLayout</span> *)collectionViewLayout referenceSizeForFooterInSection:(<span class="built_in">NSInteger</span>)section&#123;</div><div class="line">    <span class="built_in">CGSize</span> size=&#123;ScreenW,_footView.TQ_bottom&#125;;</div><div class="line">    TBLog(<span class="string">@"%f"</span>,_footView.TQ_bottom);</div><div class="line">    <span class="keyword">return</span> size;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="built_in">NSInteger</span>)numberOfSectionsInCollectionView:(<span class="built_in">UICollectionView</span> *)collectionView&#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="built_in">NSInteger</span>)collectionView:(<span class="built_in">UICollectionView</span> *)collectionView numberOfItemsInSection:(<span class="built_in">NSInteger</span>)section&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>.strArry.count;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="built_in">UICollectionViewCell</span> *)collectionView:(<span class="built_in">UICollectionView</span> *)collectionView cellForItemAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath  </div><div class="line">&#123;  </div><div class="line">    <span class="comment">//重用cell  </span></div><div class="line">    <span class="built_in">UICollectionViewCell</span> *cell = [collectionView dequeueReusableCellWithReuseIdentifier:kcellIdentifier forIndexPath:indexPath];  </div><div class="line">    <span class="comment">//赋值  </span></div><div class="line">    <span class="built_in">UIImageView</span> *imageView = (<span class="built_in">UIImageView</span> *)[cell viewWithTag:<span class="number">1</span>];  </div><div class="line">    <span class="built_in">UILabel</span> *label = (<span class="built_in">UILabel</span> *)[cell viewWithTag:<span class="number">2</span>];  </div><div class="line">    <span class="built_in">NSString</span> *imageName = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%ld.JPG"</span>,(<span class="keyword">long</span>)indexPath.row];  </div><div class="line">    imageView.image = [<span class="built_in">UIImage</span> imageNamed:imageName];  </div><div class="line">    label.text = imageName;  </div><div class="line">      </div><div class="line">    cell.backgroundColor = [<span class="built_in">UIColor</span> redColor];  </div><div class="line">    <span class="keyword">return</span> cell;  </div><div class="line">    </div><div class="line">      <span class="comment">/*也可自己另起一个cell类放界面和model类</span></div><div class="line"><span class="comment">      </span></div><div class="line"><span class="comment">          UserInfoCell *cell = (UserInfoCell *)[collectionView dequeueReusableCellWithReuseIdentifier:@"collectionVIew" forIndexPath:indexPath];</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">      </span></div><div class="line"><span class="comment">      */</span></div><div class="line">      </div><div class="line">&#125;  </div><div class="line"></div><div class="line"><span class="comment">//这个是两行cell之间的间距（上下行cell的间距）</span></div><div class="line">- (<span class="built_in">CGFloat</span>)collectionView:(<span class="built_in">UICollectionView</span> *)collectionView layout:(<span class="built_in">UICollectionViewLayout</span>*)collectionViewLayout minimumLineSpacingForSectionAtIndex:(<span class="built_in">NSInteger</span>)section&#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1.5</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//两个cell之间的间距（同一行的cell的间距）</span></div><div class="line">- (<span class="built_in">CGFloat</span>)collectionView:(<span class="built_in">UICollectionView</span> *)collectionView layout:(<span class="built_in">UICollectionViewLayout</span>*)collectionViewLayout minimumInteritemSpacingForSectionAtIndex:(<span class="built_in">NSInteger</span>)section&#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1.5</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="built_in">UICollectionReusableView</span> *)collectionView:(<span class="built_in">UICollectionView</span> *)collectionView viewForSupplementaryElementOfKind:(<span class="built_in">NSString</span> *)kind atIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath</div><div class="line">&#123;</div><div class="line">    <span class="built_in">UICollectionReusableView</span> *reusableview = <span class="literal">nil</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (kind == <span class="built_in">UICollectionElementKindSectionHeader</span>) &#123;</div><div class="line">        HeaderCRView *headerView = [collectionView dequeueReusableSupplementaryViewOfKind:<span class="built_in">UICollectionElementKindSectionHeader</span> withReuseIdentifier:<span class="string">@"header"</span> forIndexPath:indexPath];</div><div class="line">        <span class="comment">//添加头视图的内容</span></div><div class="line">        <span class="comment">//        [self setUI];</span></div><div class="line">        <span class="comment">//头视图添加view</span></div><div class="line">        [headerView addSubview:_headView];</div><div class="line">        <span class="keyword">return</span> headerView;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (kind == <span class="built_in">UICollectionElementKindSectionFooter</span>)&#123;</div><div class="line">        HeaderCRView *footView = [collectionView dequeueReusableSupplementaryViewOfKind:<span class="built_in">UICollectionElementKindSectionFooter</span> withReuseIdentifier:<span class="string">@"footer"</span> forIndexPath:indexPath];</div><div class="line">        <span class="comment">//添加尾视图的内容</span></div><div class="line">        <span class="comment">//        [self setupFootView];</span></div><div class="line">        <span class="comment">//尾视图添加view</span></div><div class="line">        [footView addSubview:_footView];</div><div class="line">        <span class="keyword">return</span> footView;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> reusableview;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//选择了某个cell  </span></div><div class="line">- (<span class="keyword">void</span>)collectionView:(<span class="built_in">UICollectionView</span> *)collectionView didSelectItemAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath  </div><div class="line">&#123;  </div><div class="line">    <span class="built_in">UICollectionViewCell</span> *cell = [collectionView cellForItemAtIndexPath:indexPath];  </div><div class="line">    [cell setBackgroundColor:[<span class="built_in">UIColor</span> greenColor]];  </div><div class="line">&#125;  </div><div class="line"><span class="comment">//取消选择了某个cell  </span></div><div class="line">- (<span class="keyword">void</span>)collectionView:(<span class="built_in">UICollectionView</span> *)collectionView didDeselectItemAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath  </div><div class="line">&#123;  </div><div class="line">    <span class="built_in">UICollectionViewCell</span> *cell = [collectionView cellForItemAtIndexPath:indexPath];  </div><div class="line">    [cell setBackgroundColor:[<span class="built_in">UIColor</span> redColor]];  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/26/UICollectionView格式示例模板/" data-id="cjcx6qcy50004dripo402tzg9" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/collectionView/">collectionView</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/模板/">模板</a></li></ul>

    </footer>
  </div>
  
</article>
 


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">下一页&raquo;</a>
  </nav>
</section>
           
    <aside id="sidebar">
  
    
  <div class="widget-wrap">
     
        <h3 class="follow-title ">Follow me</h3>
     
    <div class="widget follow">
      
              <a class="github" aria-hidden="true" href="https://github.com/tqmax" target="_blank" title="Github"></a>
      
      
            <a class="weibo" aria-hidden="true"  href="http://weibo.com/tqmax" target="_blank" title="微博"></a>
      
      
      
            <a class="email" aria-hidden="true"  href="mailto:q452316q@163.com" target="_blank" title="邮箱"></a>
      
    </div>
  </div>


  
    
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title tagcloud">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/AlertView/" style="font-size: 14px; color: #00f">AlertView</a> <a href="/tags/Demo/" style="font-size: 14px; color: #00f">Demo</a> <a href="/tags/JSON/" style="font-size: 14px; color: #00f">JSON</a> <a href="/tags/KVC/" style="font-size: 14px; color: #00f">KVC</a> <a href="/tags/Mansonry/" style="font-size: 14px; color: #00f">Mansonry</a> <a href="/tags/POI/" style="font-size: 14px; color: #00f">POI</a> <a href="/tags/collectionView/" style="font-size: 14px; color: #00f">collectionView</a> <a href="/tags/iOS-11/" style="font-size: 21.33px; color: #9f57f4">iOS 11</a> <a href="/tags/label/" style="font-size: 17.67px; color: #4f2bf9">label</a> <a href="/tags/pch/" style="font-size: 14px; color: #00f">pch</a> <a href="/tags/tabBarItem/" style="font-size: 14px; color: #00f">tabBarItem</a> <a href="/tags/tableview/" style="font-size: 25px; color: #ee82ee">tableview</a> <a href="/tags/textfiled/" style="font-size: 14px; color: #00f">textfiled</a> <a href="/tags/trandform/" style="font-size: 14px; color: #00f">trandform</a> <a href="/tags/wkwebview/" style="font-size: 14px; color: #00f">wkwebview</a> <a href="/tags/代理/" style="font-size: 14px; color: #00f">代理</a> <a href="/tags/动画/" style="font-size: 14px; color: #00f">动画</a> <a href="/tags/占位语/" style="font-size: 14px; color: #00f">占位语</a> <a href="/tags/只执行一遍/" style="font-size: 14px; color: #00f">只执行一遍</a> <a href="/tags/圆角/" style="font-size: 14px; color: #00f">圆角</a> <a href="/tags/地图/" style="font-size: 17.67px; color: #4f2bf9">地图</a> <a href="/tags/多Tap/" style="font-size: 14px; color: #00f">多Tap</a> <a href="/tags/字典/" style="font-size: 14px; color: #00f">字典</a> <a href="/tags/富文本/" style="font-size: 17.67px; color: #4f2bf9">富文本</a> <a href="/tags/对齐/" style="font-size: 14px; color: #00f">对齐</a> <a href="/tags/工具/" style="font-size: 14px; color: #00f">工具</a> <a href="/tags/引用/" style="font-size: 14px; color: #00f">引用</a> <a href="/tags/总结/" style="font-size: 21.33px; color: #9f57f4">总结</a> <a href="/tags/手势/" style="font-size: 17.67px; color: #4f2bf9">手势</a> <a href="/tags/手势、只执行一遍/" style="font-size: 14px; color: #00f">手势、只执行一遍</a> <a href="/tags/拓展/" style="font-size: 14px; color: #00f">拓展</a> <a href="/tags/数组/" style="font-size: 14px; color: #00f">数组</a> <a href="/tags/框架/" style="font-size: 14px; color: #00f">框架</a> <a href="/tags/模板/" style="font-size: 17.67px; color: #4f2bf9">模板</a> <a href="/tags/泛型/" style="font-size: 14px; color: #00f">泛型</a> <a href="/tags/滑动/" style="font-size: 14px; color: #00f">滑动</a> <a href="/tags/滚动/" style="font-size: 14px; color: #00f">滚动</a> <a href="/tags/滚动视图/" style="font-size: 14px; color: #00f">滚动视图</a> <a href="/tags/状态栏/" style="font-size: 14px; color: #00f">状态栏</a> <a href="/tags/笔记/" style="font-size: 17.67px; color: #4f2bf9">笔记</a> <a href="/tags/精度/" style="font-size: 14px; color: #00f">精度</a> <a href="/tags/获取屏幕/" style="font-size: 14px; color: #00f">获取屏幕</a> <a href="/tags/设置/" style="font-size: 14px; color: #00f">设置</a> <a href="/tags/调试/" style="font-size: 14px; color: #00f">调试</a> <a href="/tags/购物车/" style="font-size: 14px; color: #00f">购物车</a> <a href="/tags/跨页面/" style="font-size: 14px; color: #00f">跨页面</a> <a href="/tags/跳转/" style="font-size: 14px; color: #00f">跳转</a> <a href="/tags/输入/" style="font-size: 14px; color: #00f">输入</a> <a href="/tags/返回/" style="font-size: 14px; color: #00f">返回</a> <a href="/tags/透明/" style="font-size: 14px; color: #00f">透明</a> <a href="/tags/通知/" style="font-size: 14px; color: #00f">通知</a> <a href="/tags/键盘/" style="font-size: 21.33px; color: #9f57f4">键盘</a> <a href="/tags/限制输入/" style="font-size: 14px; color: #00f">限制输入</a> <a href="/tags/高效/" style="font-size: 14px; color: #00f">高效</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title recent-posts">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/01/27/常见购物车的简单实现方式/">常见购物车的简单实现方式</a>
          </li>
        
          <li>
            <a href="/2018/01/07/iOS常用扩展工具类（只为你的开发能更得心应手~）/">iOS常用扩展工具类（只为你的开发能更得心应手~）</a>
          </li>
        
          <li>
            <a href="/2018/01/01/常见的TabBar框架+多Tap处理的小Demo/">常见的TabBar框架+多Tap处理的小Demo</a>
          </li>
        
          <li>
            <a href="/2017/12/31/透明状态栏/">透明状态栏</a>
          </li>
        
          <li>
            <a href="/2017/12/10/iOS计算一段代码执行时间/">iOS计算一段代码执行时间</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title archive">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>


  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2018 TQMAX&nbsp;|&nbsp;
      主题 <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      联系方式&nbsp;|&nbsp;q452316q@163.com
    </div>
  </div>
</footer>
 <script src="/jquery/jquery.min.js"></script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      

  
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "e2fb4051c49842688ce669e634bc983f",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
    

  







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 <script src="/js/is.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/elevator.js"></script>
  </div>
</body>
</html>